<div>
    <div class="destinos-container">
        <div class="header">
            <h1>
                <i class="bi bi-map"></i>
                Destinos
            </h1>
        </div>

        <div class="search-section">
            <div class="search-row">
                <div class="search-field">
                    <label for="searchText">Búsqueda</label>
                    <input 
                        type="text" 
                        id="searchText"
                        [(ngModel)]="searchText" 
                        
                        (input)="onInput(searchText)"
                        
                        placeholder="Destino"
                        class="form-control"
                        (keyup.enter)="buscar()"
                    />
                </div>
            </div>
            
            <div class="search-actions">
                <button 
                    class="btn btn-primary" 
                    (click)="buscar()"
                >
                    <i class="bi bi-search"></i>
                    Buscar
                </button>
                <button 
                    class="btn btn-secondary" 
                    (click)="limpiar()"
                >
                    <i class="bi bi-x-lg"></i>
                    Limpiar
                </button>
            </div>
        </div>

        <div *ngIf="errorMsg" class="alert alert-danger">
            {{ errorMsg }}
        </div>

        <div class="loading-spinner" *ngIf="loading">
            <span class="spinner-border spinner-border-sm me-2" role="status"></span>
            Cargando...
        </div>

        <div class="destinos-grid"> 
            
            <div class="destino-card" *ngFor="let city of ciudades">
                
                <div class="card-content" style="padding: 15px;"> 
                    <div class="card-header">
                        <h3 class="destino-nombre">{{ city.nombre }}</h3>
                        
                        <span class="country-badge">
                            <i class="bi bi-geo-alt-fill"></i>
                            {{ city.pais }} 
                        </span>
                    </div>
                    
                    <div class="destino-details">
                        <div class="detail-item" *ngIf="city.latitud != null && city.longitud != null">
                            <i class="bi bi-pin-map-fill"></i>
                            <span class="value">
                                {{ city.latitud | number:'1.2-2' }}, {{ city.longitud | number:'1.2-2' }}
                            </span>
                        </div>
                    </div>
                    
                    <button 
                        class="btn btn-primary w-100 mt-2" 
                        (click)="verEnMapa(city)"
                        [disabled]="city.latitud == null || city.longitud == null"
                    >
                        <i class="bi bi-map"></i> Ver en mapa
                    </button>
                </div>
            </div>
        </div>

        <div class="no-results" *ngIf="!loading && !errorMsg && ciudades.length === 0 && allCities.length === 0">
            <i class="bi bi-search"></i>
            <p>Escribe el nombre de una ciudad para comenzar la búsqueda</p>
        </div>

        <div class="no-results" *ngIf="!loading && !errorMsg && ciudades.length === 0 && allCities.length > 0">
            <i class="bi bi-search"></i>
            <p>No se encontraron destinos con esos filtros</p>
        </div>

        <div class="pagination" *ngIf="!loading && !errorMsg && totalPages > 1">
            <button 
                class="pagination-btn"
                [disabled]="currentPage === 1"
                (click)="goToFirstPage()"
                title="Primera página"
            >
                «
            </button>
            
            <button 
                class="pagination-btn"
                [disabled]="currentPage === 1"
                (click)="goToPage(currentPage - 1)"
                title="Página anterior"
            >
                ‹
            </button>
            
            <button 
                *ngFor="let page of getPaginationPages()"
                class="pagination-btn"
                [class.active]="page === currentPage"
                (click)="goToPage(page)"
            >
                {{ page }}
            </button>
            
            <button 
                class="pagination-btn"
                [disabled]="currentPage === totalPages"
                (click)="goToPage(currentPage + 1)"
                title="Página siguiente"
            >
                ›
            </button>
            
            <button 
                class="pagination-btn"
                [disabled]="currentPage === totalPages"
                (click)="goToLastPage()"
                title="Última página"
            >
                »
            </button>
        </div>
    </div>
</div>